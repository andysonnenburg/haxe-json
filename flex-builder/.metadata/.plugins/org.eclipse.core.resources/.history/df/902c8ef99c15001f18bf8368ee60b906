<?xml version="1.0" encoding="utf-8"?>
<WindowedApplication xmlns="http://www.adobe.com/2006/mxml" creationComplete="profile()">
	<Script>
		<![CDATA[
			import flash.utils.getTimer;
			import com.rational.utils.CharStream;
			import com.adobe.serialization.json.JSONTokenizer;
			import com.rational.serialization.json.Lexer;
			import com.rational.serialization.json.JSON;
			import com.adobe.serialization.json.JSON;
			
			private static const MAX:int = 10000;
			
			private function profile():void {
				getTimer();
				var accumulated:int = 0, start:int, end:int, i:int;
				for (i = 0; i < MAX; i += 1) {
					start = new Date();
					const lexer:Lexer = new Lexer(new CharStream("{}"));
					lexer.peek();
					lexer.peek();
					end = new Date();
					accumulated += end.milliseconds - start.milliseconds;
				}
				haxeJsonResult.text = String(accumulated);
				for (i = 0; i < MAX; i += 1) {
					start = new Date();
					const tokenizer:JSONTokenizer = new JSONTokenizer("{}");
					tokenizer.getNextToken();
					tokenizer.getNextToken();
					end = new Date();
					accumulated += end.milliseconds - start.milliseconds;
				}
				as3corelibResult.text = String(accumulated);		
			}
		]]>
	</Script>
	<Label text="haxe-json"/>
	<Label id="haxeJsonResult"/>
	<Label text="as3corelib"/>
	<Label id="as3corelibResult"/>
</WindowedApplication>
